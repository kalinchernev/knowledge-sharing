# GraphQL Notes

AWS Amplify provides database storage through [API resource category](https://aws-amplify.github.io/docs/js/api)

At the moment of documenting workflows with GraphQL in AWS Amplify, it's still a schema-first approach.

## Schema

The project's schema is currently stored in [`amplify/backend/api/knowledgeSharing/schema.graphql`](./amplify/backend/api/knowledgeSharing/schema.graphql)

The `@model` is a [GraphQL transform](https://aws-amplify.github.io/docs/cli/graphql?sdk=js) coming from AWS Amplify.

### Clients

Quick testing can be done through the [AWS AppSync Web Console](https://eu-west-1.console.aws.amazon.com/appsync/home).

AWS Amplify's documentation demonstrate usage of 2 clients: [Amplify GraphQL Client](https://aws-amplify.github.io/docs/js/api#amplify-graphql-client) and [AWS AppSync SDK](https://aws-amplify.github.io/docs/js/api#aws-appsync-sdk). Implementations in this code base are with using the Amplify GraphQL Client.

With the help of AWS Amplify CLI, there are auto-generated set of queries and mutations at [`src/graphql`](./src/graphql). This facilitates implementations such as:

```js
import { API, graphqlOperation } from 'aws-amplify';
import { createPost } from '../graphql/mutations';

const newPost = {};

const newPost = await API.graphql(
  graphqlOperation(createPost, { input: newPost })
);
```

In the example above, one does not need to go to the GraphiQL console or other interface to figure out which fields are to be included in the given mutation, rather use the autogenerated one and send parameters directly as a second argument of `graphqlOperation()`.
